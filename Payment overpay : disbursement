from flask import Flask, request, jsonify app = Flask(__name__) # Sample data for payments payments = [] # Route to make a payment @app.route('/make_payment', methods=['POST']) def make_payment(): payment_info = request.json payments.append(payment_info) return jsonify({"message": "Payment successful"}) # Route to view payment history @app.route('/payment_history', methods=['GET']) def payment_history(): return jsonify(payments) # Route to handle overpayments and disburse back to members @app.route('/handle_overpayments', methods=['POST']) def handle_overpayments(): overpayment_info = request.json user_id = overpayment_info.get('user_id') overpayment_amount = overpayment_info.get('overpayment_amount') # Calculate total contributions of the user user_total_contributions = sum([payment['amount'] for payment in payments if payment['user_id'] == user_id]) # Check if there's an overpayment if user_total_contributions >= overpayment_amount: # Deduct the overpayment from the user's future payments (not implemented here) # Record the overpayment handling in a database (not implemented here) return jsonify({"message": "Overpayment handled successfully"}) else: return jsonify({"message": "No overpayment found"}) if __name__ == '__main__': app.run(debug=True) 
